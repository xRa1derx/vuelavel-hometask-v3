"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[463],{9463:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var a=r(3396),n=r(7139),o=r(4870),u=r(4161);const s={class:"chat"},d={class:"chat__messages"};var c=(0,a.aZ)({__name:"ChatMessagesComponent",props:{routeId:{type:Number,required:!0},authStoreUserId:{type:Number,required:!0}},setup(e){const t=e,r=(0,o.iH)();(0,o.iH)();function c(){u.Z.get(`/api/chat/${t.routeId||t.authStoreUserId}`).then((e=>{console.log(e.data),r.value=e.data}))}return(0,a.bv)((()=>c())),(e,t)=>((0,a.wg)(),(0,a.iD)("div",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.value,(e=>((0,a.wg)(),(0,a.iD)("div",d,(0,n.zw)(e.message),1)))),256))]))}}),i=r(89);const l=(0,i.Z)(c,[["__scopeId","data-v-0e28e988"]]);var p=l,m=r(9242);const v="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var g={randomUUID:v};r(1439),r(7585),r(5315);let h;const U=new Uint8Array(16);function f(){if(!h&&(h="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!h))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(U)}r(7658);const I=[];for(let R=0;R<256;++R)I.push((R+256).toString(16).slice(1));function y(e,t=0){return I[e[t+0]]+I[e[t+1]]+I[e[t+2]]+I[e[t+3]]+"-"+I[e[t+4]]+I[e[t+5]]+"-"+I[e[t+6]]+I[e[t+7]]+"-"+I[e[t+8]]+I[e[t+9]]+"-"+I[e[t+10]]+I[e[t+11]]+I[e[t+12]]+I[e[t+13]]+I[e[t+14]]+I[e[t+15]]}function S(e,t,r){if(g.randomUUID&&!t&&!e)return g.randomUUID();e=e||{};const a=e.random||(e.rng||f)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return y(a)}var w=S;const _={class:"textarea-wrapper"};var b=(0,a.aZ)({__name:"ChatTextareaComponent",props:{routeId:{type:Number,required:!0},authStoreUserId:{type:Number,required:!0}},setup(e){const t=e,r=(0,o.iH)("");function n(e){if(""!==r.value.trim())if(e.ctrlKey||"click"==e.type){const e=w(),a=r.value,n=new FormData;n.append("uuid",e),n.append("to",t.routeId||1),n.append("from",t.authStoreUserId),n.append("message",a),u.Z.post("/api/chat",n).then((e=>console.log(e)))}else{let t=e.target.selectionStart;e.target.setRangeText("\n",t,t,"end"),r.value=e.target.value}}function s(e){let t=r.value,a=e.target.selectionStart,n=t.slice(0,a),o=t.slice(a);r.value=`${n}\t${o}`,e.target.value=r.value,e.target.selectionEnd=e.target.selectionStart=a+1}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",_,[(0,a.wy)((0,a._)("textarea",{onKeyup:t[0]||(t[0]=(0,m.D2)((0,m.iM)((e=>n(e)),["ctrl"]),["enter"])),onKeydown:t[1]||(t[1]=(0,m.D2)((0,m.iM)((e=>s(e)),["exact","prevent"]),["tab"])),"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),class:"chat-textarea"},null,544),[[m.nr,r.value]]),(0,a._)("button",{onClick:n},"Отправить")]))}});const D=(0,i.Z)(b,[["__scopeId","data-v-3fdcd3a5"]]);var C=D,Z=r(2483),k=r(7183);const x={class:"chat-wrapper"},q={class:"chat-name"};var H=(0,a.aZ)({__name:"ChatComponent",setup(e){const t=(0,Z.yj)(),r=(0,k.t)();return(e,u)=>((0,a.wg)(),(0,a.iD)("section",x,[(0,a._)("div",q,(0,n.zw)((0,o.SU)(t).query.name),1),(0,a.Wm)(p,{routeId:+(0,o.SU)(t).params.id,authStoreUserId:(0,o.SU)(r).getAuthUser().id},null,8,["routeId","authStoreUserId"]),(0,a.Wm)(C,{routeId:+(0,o.SU)(t).params.id,authStoreUserId:(0,o.SU)(r).getAuthUser().id},null,8,["routeId","authStoreUserId"])]))}});const K=(0,i.Z)(H,[["__scopeId","data-v-d1b3dca8"]]);var N=K}}]);
//# sourceMappingURL=463.7614ae01.js.map