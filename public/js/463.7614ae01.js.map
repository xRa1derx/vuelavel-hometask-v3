{"version":3,"file":"js/463.7614ae01.js","mappings":"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","sources":["webpack://client/./src/components/Admin/Chat/ChatMessagesComponent.vue?0ab9","webpack://client/./src/components/Admin/Chat/ChatMessagesComponent.vue","webpack://client/./node_modules/uuid/dist/esm-browser/native.js","webpack://client/./node_modules/uuid/dist/esm-browser/rng.js","webpack://client/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://client/./node_modules/uuid/dist/esm-browser/v4.js","webpack://client/./src/components/Admin/Chat/ChatTextareaComponent.vue?cced","webpack://client/./src/components/Admin/Chat/ChatTextareaComponent.vue","webpack://client/./src/components/Admin/Chat/ChatComponent.vue?94d2","webpack://client/./src/components/Admin/Chat/ChatComponent.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0e28e988\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"chat\" }\nconst _hoisted_2 = { class: \"chat__messages\" }\n\nimport axios from 'axios';\r\nimport { onMounted, ref } from 'vue';\r\n\r\ninterface Data {\r\n    messages: { message: string };\r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ChatMessagesComponent',\n  props: {\r\n    routeId: { type: Number, required: true },\r\n    authStoreUserId: { type: Number, required: true }\r\n},\n  setup(__props) {\n\nconst props = __props;\n\r\nconst data = ref<Data>();\r\nconst currentReciever = ref();\r\n\r\nonMounted(() => getChat());\r\n\r\nfunction getChat() {\r\n    axios.get(`/api/chat/${props.routeId || props.authStoreUserId}`).then(res => {\r\n        console.log(res.data);\r\n\r\n        data.value = res.data;\r\n        currentReciever\r\n    }\r\n    )\r\n}\r\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(data.value, (message) => {\n      return (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(message.message), 1))\n    }), 256))\n  ]))\n}\n}\n\n})","import script from \"./ChatMessagesComponent.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatMessagesComponent.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatMessagesComponent.vue?vue&type=style&index=0&id=0e28e988&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0e28e988\"]])\n\nexport default __exports__","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { defineComponent as _defineComponent } from 'vue'\nimport { withModifiers as _withModifiers, withKeys as _withKeys, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3fdcd3a5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"textarea-wrapper\" }\n\nimport axios from 'axios';\r\nimport { ref } from 'vue';\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ChatTextareaComponent',\n  props: {\r\n    routeId: { type: Number, required: true },\r\n    authStoreUserId: { type: Number, required: true }\r\n},\n  setup(__props) {\n\nconst props = __props;\n\r\nconst text = ref('');\r\n\r\nfunction addMessage(event) {\r\n    if (text.value.trim() !== \"\"\r\n        //  || selectedFile.value != null\r\n    ) {\r\n        if (event.ctrlKey || event.type == \"click\") {\r\n            const config = {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n            };\r\n            const uuid = uuidv4();\r\n            // const replyMessage = props.quote.message || \"\";\r\n            const message = text.value;\r\n            const formData = new FormData();\r\n            formData.append(\"uuid\", uuid);\r\n            formData.append(\"to\", props.routeId || 1);\r\n            formData.append(\"from\", props.authStoreUserId);\r\n            formData.append(\"message\", message);\r\n            // formData.append(\"replyMessage\", replyMessage);\r\n            axios.post(`/api/chat`, formData).then(res => console.log(res));\r\n        }\r\n        else {\r\n            let caret = event.target.selectionStart;\r\n            event.target.setRangeText(\"\\n\", caret, caret, \"end\");\r\n            text.value = event.target.value;\r\n        }\r\n    }\r\n}\r\n\r\nfunction tabLeft(event) {\r\n    let message = text.value;\r\n    let originalSelectionStart = event.target.selectionStart,\r\n        textStart = message.slice(0, originalSelectionStart),\r\n        textEnd = message.slice(originalSelectionStart);\r\n\r\n    text.value = `${textStart}\\t${textEnd}`;\r\n    event.target.value = text.value;\r\n    event.target.selectionEnd = event.target.selectionStart =\r\n        originalSelectionStart + 1;\r\n};\r\n\r\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"textarea\", {\n      onKeyup: _cache[0] || (_cache[0] = _withKeys(_withModifiers(($event: any) => (addMessage($event)), [\"ctrl\"]), [\"enter\"])),\n      onKeydown: _cache[1] || (_cache[1] = _withKeys(_withModifiers(($event: any) => (tabLeft($event)), [\"exact\",\"prevent\"]), [\"tab\"])),\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((text).value = $event)),\n      class: \"chat-textarea\"\n    }, null, 544), [\n      [_vModelText, text.value]\n    ]),\n    _createElementVNode(\"button\", { onClick: addMessage }, \"Отправить\")\n  ]))\n}\n}\n\n})","import script from \"./ChatTextareaComponent.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatTextareaComponent.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatTextareaComponent.vue?vue&type=style&index=0&id=3fdcd3a5&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3fdcd3a5\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d1b3dca8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"chat-wrapper\" }\nconst _hoisted_2 = { class: \"chat-name\" }\n\nimport ChatMessagesComponent from \"@/components/Admin/Chat/ChatMessagesComponent.vue\";\r\nimport ChatTextareaComponent from \"@/components/Admin/Chat/ChatTextareaComponent.vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useAuthStore } from '@/stores/authStore';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ChatComponent',\n  setup(__props) {\n\r\n\r\nconst route = useRoute();\r\nconst authStore = useAuthStore();\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, _toDisplayString(_unref(route).query.name), 1),\n    _createVNode(ChatMessagesComponent, {\n      routeId: +_unref(route).params.id,\n      authStoreUserId: _unref(authStore).getAuthUser().id\n    }, null, 8, [\"routeId\", \"authStoreUserId\"]),\n    _createVNode(ChatTextareaComponent, {\n      routeId: +_unref(route).params.id,\n      authStoreUserId: _unref(authStore).getAuthUser().id\n    }, null, 8, [\"routeId\", \"authStoreUserId\"])\n  ]))\n}\n}\n\n})","import script from \"./ChatComponent.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatComponent.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatComponent.vue?vue&type=style&index=0&id=d1b3dca8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d1b3dca8\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_defineComponent","__name","props","routeId","type","Number","required","authStoreUserId","setup","__props","data","ref","getChat","axios","get","then","res","console","log","value","onMounted","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_renderList","message","_toDisplayString","__exports__","randomUUID","crypto","bind","getRandomValues","rnds8","Uint8Array","rng","Error","byteToHex","i","push","toString","slice","unsafeStringify","arr","offset","v4","options","buf","native","rnds","random","text","addMessage","event","trim","ctrlKey","uuid","uuidv4","formData","FormData","append","post","caret","target","selectionStart","setRangeText","tabLeft","originalSelectionStart","textStart","textEnd","selectionEnd","_withDirectives","_createElementVNode","onKeyup","_withKeys","_withModifiers","$event","onKeydown","_vModelText","onClick","route","useRoute","authStore","useAuthStore","_unref","query","name","_createVNode","ChatMessagesComponent","params","id","getAuthUser","ChatTextareaComponent"],"sourceRoot":""}